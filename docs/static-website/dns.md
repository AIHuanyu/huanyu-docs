# 域名解析
## 1. 什么是DNS
DNS 全称是域名系统（Domain Name System），本质是一套 “将好记的文字域名翻译成电脑能识别的数字 IP 地址” 的工具，就像我们手机里的通讯录，你不用记朋友复杂的手机号（对应 IP 地址），只需记住名字（对应域名），拨号时通讯录会自动匹配手机号；在互联网上，如果你想访问百度，无需记住它的真实的IP地址，只需输入`www.baidu.com`就可以访问百度，这个`www.baidu.com`就是百度的 “域名”。
|概念|类比|
|--|--|
|DNS|手机通讯录|
|域名|通讯录中的姓名|
|IP地址|通讯录中的手机号|
## 2. 域名结构
### 2.1. 根域名
一个完整的域名由两部分核心内容构成，层级清晰，缺一不可：​  
- 主体（也叫 “二级域名”）：你可自定义的核心部分，代表服务或品牌的专属名称，注册时只要未被他人占用，你就能选择符合品牌或个人需求的名称（如姓名、品牌名、业务关键词等）。​
- 顶级域名（也叫 “一级域名”）：域名的 “类别或地域标识”，位于主体右侧，以 “.” 分隔，常见类型有：​  
通用顶级域名：.com（商业）、.org（非营利组织）、.net（网络服务）、.info（资讯）等，无地域限制，全球通用；​  
国别顶级域名：.cn（中国）、.us（美国）、.jp（日本）等，代表特定国家或地区，部分需要实名认证（如.cn 域名需国内身份或企业资质）。​

二者结合，就是完整的 “根域名”（也叫 “主域名”），比如baidu.com（主体 + 通用顶级域名）。
|品牌|主体|顶级域名|根域名|
|--|--|--|--|
|百度|baidu|.com|baidu.com|
|京东|jd|.com|jd.com|
|小米|mi|.com|mi.com|
|哔哩哔哩|bilibili|.com|bilibili.com|

### 2.2. 子域名
子域名是在根域名基础上添加前缀形成的 “下级域名”，属于根域名的延伸分支。
例如在 `baidu.com` 基础上，添加 map 前缀形成 `map.baidu.com`（一级子域名），再添加 `api` 形成 `api.map.baidu.com`（二级子域名），这些都属于子域名。

理论上可以无限添加前缀扩展层级，但是实际不会无限层级，因为域名过长，用户无法记住，DNS解析速度也会变慢，因此，通常遵循`根域名+1-2层子域名`的规则。例如，百度的主要域名：
|域名|对应产品|
|--|--|
|www.baidu.com|百度搜索引擎|
|baike.baidu.com|百度百科|
|map.baidu.com|百度地图|
|news.baidu.com|百度新闻|
|pan.baidu.com|百度网盘|



特别说明：`www. `开头的域名（比如 `www.baidu.com`）也属于子域名，而且是最常见的一级子域名之一。从域名层级来看，`baidu.com` 是根域名（主域名），在它前面加 `www` 作为前缀，就形成了一级子域名 `www.baidu.com`。它的作用和其他子域名（如 `baike.baidu.com`、`map.baidu.com`）本质一致，都是在根域名基础上做功能或用途的细分，只不过 `www` 是历史沿用的 “万维网服务” 标识，早期用于区分网站服务和其他服务（如邮件、FTP 等），现在更多是用户习惯的延续，因此`www.`通常是一个主体的核心网站，比如：`www.baidu.com`就是百度搜索引擎。
这个命名可以理解为：`baidu.com` 是 “小区名称”，`www.baidu.com` 是 “小区正门”，而且因为多年来互联网发展的习惯，`www.` 开头的域名通常是主体的“正门”，也就是核心网站。
## 3. 域名解析
如果说 DNS 是互联网的通讯录，那域名解析记录就是这本通讯录里的 “具体条目”，它定义了域名与服务器、服务之间的对应关系，告诉 DNS 服务器 “该把域名指向哪里”。域名解析记录通常在域名管理后台进行自定义添加。
配置解析记录通常由以下配置，以`aihuanyu.space`为例：
1. 主机记录（Host Record）：域名的前缀部分，对应 DNS 记录中的 “域名” 字段。
   - 例如，在 `www.aihuanyu.space` 中，主机记录为 `www`；
   - 如果是根域名（如 `aihuanyu.space`），主机记录为空（或设为 `@`）；
   - 其他子域名（如 `blog.aihuanyu.space`），主机记录为 `blog`。
2. 记录类型（Record Type）：指定域名解析记录的类型，不同类型有不同的作用和格式。常见的有：

|记录类型|使用目的|
|--|--|
|A 记录|将域名指向一个 IP 地址。|
|CNAME 记录|将域名指向另一个域名，再由另一个域名提供 IP 地址。|
|MX 记录|设置邮箱，让邮箱能收到邮件。|
|TXT 记录|对域名进行标识和说明，绝大多数的 TXT 记录是用来做 SPF 记录（反垃圾邮件）。|
|NS 记录|将子域名交给其他 DNS 服务商解析。|
|AAAA 记录|将域名指向一个 IPv6 地址。|
|SRV 记录|用来标识某台服务器使用了某个服务，常见于微软系统的目录管理。|
|CAA 记录|授权指定 CA 机构为域名签发 SSL 证书，以防止 SSL 证书错误签发。|
|SVCB 记录|用来说明服务的 IP 地址，ECH 公钥以及其他建立连接所需的信息，通过一次 DNS 查询来加速通信连接过程。|
|HTTPS 记录|HTTPS 记录是一类特殊的 SVCB 记录，说明 HTTPS 建联所需的信息。|
|隐性 URL 记录|将一个域名指向另外一个已经存在的站点。|

经常使用的是A记录和CNAME记录。
- A 记录：直接将域名映射到 IPv4 地址，相当于在地址簿里写 “张三 → 138xxxx1234”, 适合服务器 IP 固定的场景，比如自建云服务器部署网站时；
- CNAME 记录：将域名映射到另一个域名（而非直接指向 IP），相当于地址簿里写 “张三 → 李四家”，再通过李四的条目找到具体地址；

比如Vercel部署网站，因为 Vercel 服务器 IP 会动态变化，若配置 A 记录，IP 变更后网站会立刻失效，更适合使用 CNAME 记录：只需将 `www.aihuanyu.space` 指向 Vercel 官方域名 `cname-china.vercel-dns.com.`，后续 Vercel 更换 IP 时，无需修改你的解析记录，系统会自动同步新地址。
